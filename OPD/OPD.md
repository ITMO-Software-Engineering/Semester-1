# OPD

## UNIX 系统

### 文件系统

- 文件
  - 概念：UNIX 下一切皆文件，文件时整个文件系统的基础
  - 内容：其中存储所有必要的系统和用户信息
  - 信息
    1. 文件的类型和权限
        - 以 10 位字符表示
        - 第 1 位表示文件类型
          - `-` 常规文件
          - `d` 目录
          - `l` 链接文件
          - `b` 装置文件里面的可供储存的接口设备（可随机存取装置）
          - `c` 装置文件里面的串行端口设备，例如键盘、鼠标（一次性读取装置）
        - 第 2-4 位表示所有者权限，用 `rwx` 分别表示读，写，执行权限，没有的权限用 `-`表示
        - 第 5-7 位表示所有组权限，表示格式同上
        - 第 8-10 位表示其他用户权限，表示格式同上
    2. 文件的硬连接数
    3. 所有者名称
    4. 所有者组名称
    5. 文件大小（以字节为单位）
    6. 修改时间（默认最后一次修改时间）
- 目录
  - 本质：一种特殊的文件
  - 内容：
    - 作为文件其中存储了所包含的文件名和 inode 号
    - 每个目录都包含两个必须的文件
      - "."文件 - 指向自身的链接
      - ".."文件 - 指向文件层次结构更高的目录的链接
  - 权限
    - `r` 可列出目录中的文件或者是目录情况
    - `w` 可在目录中创建、删除和修改命令下的文件或者是目录
    `x` 可以使用cd命令切换到此目录
    `-` 没有任何此目录的所有权限
  - 常见系统目录
    - `/usr/bin` - 操作系统提供的主要实用程序和程序目录
    - `/usr/lib` - 系统库目录
    - `/var` - 系统日志和工作文件目录
    - `/tmp` - 临时存储目录
    - `/proc` - 包含表示有关用户和操作系统进程的信息的文件目录
  - 路径
    - 绝对路径：从文件系统根目录开始的路径
    - 相对路径：是从当前目录开始的路径
  - 链接
    - 硬链接：与原文件具有相同 inode （在同一个挂载点内）的文件
    - 软连接（符号链接）包含原文件绝对路径或相对路径的文件
- 文件流
  - 标准输入流（`stdin`(0)）：输入至程序的资料（通常是文件）
  - 标准输出流（`stdout`(1)）：自程序输出的资料
  - 标准错误流（`stderr`(2)）：输出流的一种，子程序输出的错误信息，与标准输出区分

### 指令系统

- 输入输出重定向
  - `> file` 将标准输出流重定向至 file 文件并覆盖
  - `>> file` 将标准输出流重定向至 file 文件并在其后添加
  - `2> file` 将标准错误流重定向至 file 文件并覆盖
  - `2>> file` 将标准错误流重定向至 file 文件并在其后添加
  - `< file` 将 file 文件的内容重定向至标准输入
  - `<< EOF` 将后续从终端连续输入直到 "EOF" 的内容重定向至标准输入流
  - `|` 管道符，将上一个命令的标准输出链接到下一个命令的标准输入
- 基础命令
  - `mkdir` 创建目录
    - 用法 `mkdir [参数] 目录名`
    - 参数
      - `-p` 若路径中的某些目录尚不存在，加上此选项后，系统将自动建立好那些尚不存在的目录，即一次可以建立多级目录
      - `-m` 创建目录的同时设定权限（类似 `chmod`）
      - `-v` 创建目录后显示信息
  - `echo` 
    - 用法 `echo [参数] [字符串]`
    - 参数
      - `-n` 不在最后自动换行
      - `-e` 对于以下字符加以处理
        - `\a` 发出警告声
        - `\b` 删除前一个字符
        - `\c` 最后不加上换行符号
        - `\f` 换行但光标仍旧停留在原来的位置
        - `\n` 换行且光标移至行首
        - `\r` 光标移至行首，但不换行
        - `\t` 插入tab
        - `\v` 插入垂直表格跳位键
        - `\\` 插入\字符
        - `\nnn` 插入 nnn（八进制）所代表的 ASCII 字符
    - 字符串
      - 可以不带引号输入，此时将忽略字符串中的空格
      - 若带引号输入，则保留引号中字符串包含的空格
  - `cat` 连接文件或标准输入并打印。这个命令常用来显示文件内容，或者将几个文件连接起来显示，或者从标准输入读取内容并显示
    - 用法 `cat [参数] 文件`
    - 参数
      - `-n` 对输出的所有行编号
  - `touch` 用来修改文件时间戳，或者新建一个不存在的文件
    - 用法 `touch [参数] 文件`
    - 参数
      - `-a` 只更改存取时间
      - `-m` 之更改变动时间
  - `ls` 列出目标目录中所有的子目录和文件
    - 用法 `ls [参数] 目录名`
    - 参数
      - `-a` 列出目录下的所有文件，包括以 `.` 开头的隐含文件
      - `-A` 同 `-a`，但不列出 `.` 及 `..` 文件
      - `-S` 根据文件大小排序
      - `-s` 以块大小为单位列出所有文件的大小
      - `-R` 同时列出所有的子目录内容
      - `-r` 以相反次序排列
      - `-l` 以长格式列出文件的详细信息
      - `-t` 以文件修改时间排序，新的在前
  - `pwd` 显示当前目录
  - `cd` 移动至指定目录
  - `rm` 删除指定文件
    - 用法 `rm [参数] 文件地址`
    - 参数
      - `-i` 删除前逐一确认
      - `-f` 强制删除，无需确认
      - `r` 递归删除目录及目录一下的文件
  - `rmdir` 删除空目录
  - `mv` 用来移动文件或者将文件改名
    - 用法 `mv [参数] 原文件 目标文件`
    - 参数
      - `-b` 如果目标文件存在，则在覆盖之前备份
      - `-f` 强制移动，若目标文件存在则直接覆盖
      - `-i` 若目标文件存在，则询问是否覆盖
      - `-u` 若目标文件已经存在，且原文件较新，则会更新
  - `head` 用来显示档案的开头
    - 用法 `mv [参数] 文件`
    - 参数
      - `-q` 隐藏文件名
      - `-v` 显示文件名
      - `-c` 设定显示字节数
      - `-n` 设定显示行数
  - `tail`用来显示档案的结尾
  - `sort` 排序命令
    - 用法 `sort [参数] 文件`
    - 原理：将每一行为单位，互相比较，按 ASCII 码值进行比较，默认以升序输出
    - 参数
      - `-r` 将默认的升序改为降序
      - `-u` 在输出中去除重复行
      - `-o` 把结果输出写入到指定文件，例如将文件内容排序后写入到原来的文件，此时不能用重定向，只能用该参数
      - `-n` 按数字大小排序
      - `-t` 设定列分隔符 默认以空格分列
      - `-k` 按指定列排序
  - `grep`
    - 参数
      - `-l` 仅输出匹配的内容匹配的文件名
  - `wc` 计算文件的字节数，字数或列数
    - 参数
      - `-c` 只显示字节数
      - `-l` 只显示行数
      - `-w` 只显示字数

## 微机原理

### 微机组成原理

### 微机指令原理
- 取值范围计算
  - 逻辑运算
    - 范围任取
  - 算数运算
    - 加法（A+B）
      1. 情况1  
        $$-2^{14}<=A,B<=2^{14}
        $$
      2. 情况2
        $$2^{14}<=B<=2^{15}-1\\
        -2^{15}<=A<=0
        $$
      4. 情况3
        $$-2^{15}<=B<=-2^{14}-1\\
        0<=A<=2^{15}-1
        $$
      - 减法（A-B）
        - 算法同加法，将-B当作B即可
        
- 寄存器
  - IP（Instruction Pointer）指令指针，存储下一条命令的地址
  - CR（Command Register）命令寄存器，存储下一条命令的内容
  - AR（Address Register）地址寄存器，访问命令前再此存放命令地址
  - DR（Data Register）数据寄存器，用于从储存但愿读取或写入数据
  - SP（Stack Pointer）栈指针，11位，总是指向栈顶
  - BR（Buffer Register）缓冲寄存器，用于存储运算过程中的临时数据
  - AC（Accumulator）
  - NZVC
    - N - 负数符号位
    - Z - 0 符号位
    - V - 溢出位
    - C - 最高进位借位
- 指令
  - 寻址指令
    指令码 | 助记符 | 作用
    ------|--------|----
    2XXX | AND M | M&AC->AC
    3XXX | OR M | \^(\^M&\^AC)->AC
    4XXX | ADD M | M+AC->AC
    5XXX | ADC M | M+AC+C->AC
    6XXX | SUB M | AC-M->AC
    7XXX | CMP M | 同 SUB M 只是计算结果不存进 AC 只改变标识符
    8XXX | LOOP M | M-1->M IF M<=0 IP+1->IP
    9XXX |       | 
    AXXX | LD M | M->AC
    BXXX | SWAM M | M<->AC
    CXXX | JUMP M | M->IP
    DXXX | CALL M | SP-1->SP IP->SP M->IP
    EXXX | ST M | AC->M
  - 非寻址指令
    指令码 | 助记符 | 作用
    ------|--------|----
    0000 | NOP | 
    0100 | HLT | 终止
    0200 | CLA | 0->AC
    0280 | NOT | \^AC->AC
    0300 | CLC | 0->C
    0380 | CMC | \^C->C
    0400 | ROL | 循环左移
    0480 | ROR | 循环右移
    0500 | ASL | 算数左移
    0580 | ASR | 算数右移
    0600 | SXTB | 延长符号位
    0680 | SWAB | 交换高低字节
    0700 | INC | AC+1->AC
    0780 | DEC | AC-1->AC
    0800 | NEG | \^AC+1->AC
    0900 | 
    0A00 | 
    0B00 | 
    0C00 | 
    0D00 | 
    0E00 | 
